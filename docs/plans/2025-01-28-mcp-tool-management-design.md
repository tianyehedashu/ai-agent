# MCP å·¥å…·ç®¡ç†é¡µé¢è®¾è®¡

**æ—¥æœŸ**: 2025-01-28
**ç›®æ ‡ç”¨æˆ·**: æ™®é€šä¸šåŠ¡ç”¨æˆ·

---

## ä¸€ã€åŠŸèƒ½æ¦‚è¿°

ä¸º MCP æœåŠ¡å™¨ç®¡ç†æä¾›ç‹¬ç«‹çš„å‰ç«¯é¡µé¢ï¼Œæ”¯æŒï¼š

1. æŸ¥çœ‹å’Œç®¡ç† MCP æœåŠ¡å™¨åŠå…¶å·¥å…·
2. å·¥å…·çº§åˆ«çš„å¯ç”¨/ç¦ç”¨æ§åˆ¶
3. æ·»åŠ è‡ªå®šä¹‰å·¥å…·åˆ°æœåŠ¡å™¨
4. AI è¾…åŠ©ç”Ÿæˆå·¥å…·å®šä¹‰
5. æ˜¾ç¤ºå·¥å…·å®šä¹‰çš„ Token ä¸Šä¸‹æ–‡å ç”¨

---

## äºŒã€é¡µé¢ç»“æ„

### è·¯ç”±ä¸æ–‡ä»¶ç»„ç»‡

```
/frontend/src/pages/mcp/
â”œâ”€â”€ index.tsx              # MCP ç®¡ç†ä¸»é¡µé¢
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ server-list.tsx    # æœåŠ¡å™¨åˆ—è¡¨ç»„ä»¶
â”‚   â”œâ”€â”€ server-card.tsx    # æœåŠ¡å™¨å¡ç‰‡
â”‚   â”œâ”€â”€ import-dialog.tsx  # å¯¼å…¥å¯¹è¯æ¡†
â”‚   â””â”€â”€ detail-drawer.tsx  # ä¾§è¾¹è¯¦æƒ…æŠ½å±‰
```

### ä¸»é¡µé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP å·¥å…·ä¸­å¿ƒ                                    [å¯¼å…¥]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” æœç´¢æœåŠ¡å™¨...                          [ç­›é€‰ â–¼]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ğŸ“ æ–‡ä»¶ç³»ç»Ÿ  â”‚  â”‚ ğŸ”— GitHub   â”‚  â”‚ ğŸ” æœç´¢å¼•æ“  â”‚     â”‚
â”‚  â”‚ 12 ä¸ªå·¥å…·   â”‚  â”‚ 8 ä¸ªå·¥å…·    â”‚  â”‚ 3 ä¸ªå·¥å…·    â”‚     â”‚
â”‚  â”‚ ğŸŸ¢ å·²è¿æ¥    â”‚  â”‚ ğŸŸ¢ å·²è¿æ¥    â”‚  â”‚ ğŸŸ¡ æœªè¿æ¥    â”‚     â”‚
â”‚  â”‚ ä¸Šä¸‹æ–‡:2.3k  â”‚  â”‚ ä¸Šä¸‹æ–‡:1.8k  â”‚  â”‚ ä¸Šä¸‹æ–‡:0.9k  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰ã€ä¾§è¾¹æŠ½å±‰è¯¦æƒ…é¡µ

### è¯¦æƒ…æŠ½å±‰ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub MCP                              [Ã—]                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  æœåŠ¡å™¨ä¿¡æ¯                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ URL: https://github.com/mcp-server                      â”‚   â”‚
â”‚  â”‚ çŠ¶æ€: ğŸŸ¢ å·²è¿æ¥  |  å·¥å…·æ•°: 12  |  ä¸Šä¸‹æ–‡å ç”¨: 3.2k tokens â”‚   â”‚
â”‚  â”‚ æè¿°: GitHub ä»“åº“å’Œ Issue ç®¡ç†å·¥å…·                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  å·¥å…·åˆ—è¡¨                                    [+ æ·»åŠ å·¥å…·] [ğŸ”„ åˆ·æ–°]â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ” æœç´¢å·¥å…·...                                           â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ âœ… ğŸ“¦ get_repository       ä¸Šä¸‹æ–‡: 280 tokens    [â‹®]   â”‚   â”‚
â”‚  â”‚ âœ… ğŸ“ create_issue          ä¸Šä¸‹æ–‡: 320 tokens    [â‹®]   â”‚   â”‚
â”‚  â”‚ âœ… ğŸ“‹ list_issues           ä¸Šä¸‹æ–‡: 190 tokens    [â‹®]   â”‚   â”‚
â”‚  â”‚ â¬œ ğŸ”„ create_pull_request   ä¸Šä¸‹æ–‡: 350 tokens    [â‹®]   â”‚   â”‚
â”‚  â”‚ â¬œ ğŸ”€ merge_pull_request    ä¸Šä¸‹æ–‡: 280 tokens    [â‹®]   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  [æµ‹è¯•è¿æ¥]                    [ç¦ç”¨æœåŠ¡å™¨]                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å·¥å…·çŠ¶æ€

- **âœ… å·²å¯ç”¨**: å·¥å…·å·²æ³¨å†Œåˆ°ç³»ç»Ÿï¼ŒAgent å¯è°ƒç”¨
- **â¬œ æœªå¯ç”¨**: å·¥å…·å­˜åœ¨ä½† Agent ä¸å¯è°ƒç”¨

---

## å››ã€æ·»åŠ /ç¼–è¾‘å·¥å…·

### æ·»åŠ å·¥å…·å¯¹è¯æ¡†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ·»åŠ å·¥å…·åˆ° GitHub MCP                                    [Ã—]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å·¥å…·åç§°                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ my_custom_tool                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  æè¿°                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ‰§è¡Œè‡ªå®šä¹‰æ“ä½œ...                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  å·¥å…·å®šä¹‰ (JSON Schema)                         [ğŸ¤– AI ç”Ÿæˆ]   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ {                                                         â”‚   â”‚
â”‚  â”‚   "type": "object",                                      â”‚   â”‚
â”‚  â”‚   "properties": {                                        â”‚   â”‚
â”‚  â”‚     "query": { "type": "string" }                        â”‚   â”‚
â”‚  â”‚   }                                                      â”‚   â”‚
â”‚  â”‚ }                                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  æ‰§è¡Œé…ç½®                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ‰§è¡Œæ–¹å¼: â—‹ MCP è°ƒç”¨  â—‹ HTTP è¯·æ±‚  â—‹ è‡ªå®šä¹‰è„šæœ¬        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚                    [å–æ¶ˆ]  [ä¿å­˜]                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### AI ç”Ÿæˆå·¥å…·å®šä¹‰

ç”¨æˆ·è¾“å…¥è‡ªç„¶è¯­è¨€æè¿°ï¼ŒAI è‡ªåŠ¨ç”Ÿæˆ JSON Schemaï¼š

```
è¾“å…¥: "æŸ¥è¯¢ GitHub ä»“åº“çš„ Issue åˆ—è¡¨ï¼Œæ”¯æŒæŒ‰çŠ¶æ€ç­›é€‰"

AI ç”Ÿæˆ:
{
  "type": "object",
  "properties": {
    "owner": { "type": "string", "description": "ä»“åº“æ‰€æœ‰è€…" },
    "repo": { "type": "string", "description": "ä»“åº“åç§°" },
    "state": {
      "type": "string",
      "enum": ["open", "closed", "all"],
      "description": "Issue çŠ¶æ€"
    }
  },
  "required": ["owner", "repo"]
}
```

---

## äº”ã€Token å ç”¨è®¡ç®—

### è®¡ç®—é€»è¾‘

å°†å·¥å…·çš„å®Œæ•´å®šä¹‰ï¼ˆname + description + inputSchemaï¼‰è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œä½¿ç”¨ tokenizer è®¡ç®— token æ•°é‡ã€‚

```
å·¥å…·å®šä¹‰å­—ç¬¦ä¸²é•¿åº¦ â†’ TikToken â†’ Token æ•°é‡
```

### æ˜¾ç¤ºè§„åˆ™

| Token èŒƒå›´ | é¢œè‰² | æ ‡è¯† |
|-----------|------|------|
| < 500 | ğŸŸ¢ ç»¿è‰² | ä½å ç”¨ |
| 500-1500 | ğŸŸ¡ é»„è‰² | ä¸­ç­‰å ç”¨ |
| > 1500 | ğŸ”´ çº¢è‰² | é«˜å ç”¨ |

### åç«¯ API

```python
GET /api/v1/mcp/servers/{id}/tools          # è·å–å·¥å…·åˆ—è¡¨ï¼ˆå« token å ç”¨ï¼‰
GET /api/v1/mcp/servers/{id}/token-count    # è·å–æ€» token å ç”¨
PUT /api/v1/mcp/servers/{id}/tools/{tool_id}/enabled  # åˆ‡æ¢å·¥å…·å¯ç”¨çŠ¶æ€
POST /api/v1/mcp/servers/{id}/tools          # æ·»åŠ è‡ªå®šä¹‰å·¥å…·
POST /api/v1/mcp/tools/ai-generate           # AI ç”Ÿæˆå·¥å…·å®šä¹‰
```

---

## å…­ã€æ•°æ®æ¨¡å‹æ‰©å±•

### MCPServer æ¨¡å‹æ‰©å±•

```python
# available_tools ç»“æ„æ‰©å±•
{
  "tools": [
    {
      "name": "get_repository",
      "description": "...",
      "inputSchema": {...},
      "enabled": True,           # æ–°å¢ï¼šå·¥å…·çº§åˆ«å¯ç”¨
      "token_count": 280,        # æ–°å¢ï¼šToken å ç”¨
      "is_custom": False         # æ–°å¢ï¼šæ˜¯å¦ä¸ºè‡ªå®šä¹‰å·¥å…·
    }
  ],
  "total_tokens": 3200,          # æ–°å¢ï¼šæ€» Token å ç”¨
  "enabled_count": 3,            # æ–°å¢ï¼šå·²å¯ç”¨å·¥å…·æ•°
  "total_count": 12              # æ–°å¢ï¼šæ€»å·¥å…·æ•°
}
```

---

## ä¸ƒã€UI ç»„ä»¶å¤ç”¨

ä½¿ç”¨ç°æœ‰çš„ shadcn/ui ç»„ä»¶ï¼š

- `Card`, `CardHeader`, `CardContent` - æœåŠ¡å™¨å¡ç‰‡
- `Drawer` æˆ– `Sheet` - ä¾§è¾¹æŠ½å±‰
- `Dialog` - æ·»åŠ å·¥å…·å¯¹è¯æ¡†
- `Switch` - å·¥å…·å¯ç”¨/ç¦ç”¨å¼€å…³
- `Badge` - çŠ¶æ€æ˜¾ç¤º
- `Input` - æœç´¢å’Œè¡¨å•è¾“å…¥
- `Button` - æ“ä½œæŒ‰é’®

---

## å…«ã€å®æ–½ä¼˜å…ˆçº§

| ä¼˜å…ˆçº§ | åŠŸèƒ½ |
|-------|------|
| P0 | æœåŠ¡å™¨åˆ—è¡¨é¡µ + ä¾§è¾¹æŠ½å±‰è¯¦æƒ… |
| P0 | å·¥å…·åˆ—è¡¨å±•ç¤º + Token å ç”¨æ˜¾ç¤º |
| P1 | å·¥å…·å¯ç”¨/ç¦ç”¨åˆ‡æ¢ |
| P1 | æ·»åŠ è‡ªå®šä¹‰å·¥å…· |
| P2 | AI ç”Ÿæˆå·¥å…·å®šä¹‰ |
| P2 | å¯¼å…¥åŠŸèƒ½ |
