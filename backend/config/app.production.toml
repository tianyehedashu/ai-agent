# =============================================================================
# 生产环境配置 (Production)
# =============================================================================
# 此文件仅包含需要覆盖 app.toml 的配置
# 未指定的配置将使用 app.toml 中的默认值
#
# 生产环境优化目标:
# 1. 稳定性优先 - 使用成熟稳定的模型
# 2. 性能与成本平衡 - 根据场景选择合适模型
# 3. 可观测性 - 完整的监控和日志
# =============================================================================

# -----------------------------------------------------------------------------
# LLM 场景化模型 - 生产环境使用稳定高效的模型
# -----------------------------------------------------------------------------
[llm]
# 生产环境默认使用 DeepSeek Chat，稳定且高性价比
default_model = "deepseek/deepseek-chat"

# 快速模型使用通义 Turbo，响应最快 (407ms)
fast_model = "dashscope/qwen-turbo"

# 推理模型使用 DeepSeek Reasoner，效果最佳
reasoning_model = "deepseek/deepseek-reasoner"

# 代码模型使用 Qwen Coder，速度快效果好
code_model = "dashscope/qwen2.5-coder-32b-instruct"

# 长文档使用 GLM-4 Long (100万上下文)
long_context_model = "zai/glm-4-long"

# 视觉模型使用通义 VL Max
vision_model = "dashscope/qwen-vl-max"

# -----------------------------------------------------------------------------
# SimpleMem - 生产环境使用稳定快速的模型
# -----------------------------------------------------------------------------
[simplemem]
# 使用通义 Turbo，速度快且稳定
extraction_model = "dashscope/qwen-turbo"

# 生产环境更严格的过滤，减少无效记忆
[simplemem.filter]
novelty_threshold = 0.4

# -----------------------------------------------------------------------------
# Agent - 生产环境允许更多迭代
# -----------------------------------------------------------------------------
[agent]
max_iterations = 50     # 生产环境允许更长的执行
timeout_seconds = 900   # 15 分钟超时

# -----------------------------------------------------------------------------
# 日志 - 生产环境精简日志
# -----------------------------------------------------------------------------
[logging]
level = "WARNING"  # 生产环境只记录警告和错误
format = "json"    # JSON 格式便于日志系统解析

# -----------------------------------------------------------------------------
# 监控 - 生产环境启用完整监控
# -----------------------------------------------------------------------------
[monitoring]
metrics_enabled = true
tracing_enabled = true
# jaeger_endpoint = "http://jaeger:14268/api/traces"

# -----------------------------------------------------------------------------
# Token 优化 - 生产环境优化成本
# -----------------------------------------------------------------------------
[token_optimization]
prompt_cache_enabled = true  # 必须开启，节省 50%-90% 成本

[token_optimization.summarization]
enabled = true
threshold = 6000  # 生产环境更早触发摘要，控制成本
