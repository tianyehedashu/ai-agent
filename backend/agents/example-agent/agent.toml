# =============================================================================
# 示例 Agent 执行环境配置
# =============================================================================
# Agent ID: example-agent
# 描述: 这是一个示例配置，展示如何配置 Agent 执行环境

[metadata]
agent_id = "example-agent"
name = "示例助手"
description = "一个展示配置系统用法的示例 Agent"

# 继承 Python 开发环境模板
extends = "python-dev"

# -----------------------------------------------------------------------------
# 沙箱配置覆盖
# -----------------------------------------------------------------------------
[sandbox]
# 覆盖超时时间
timeout_seconds = 90

[sandbox.resources]
# 覆盖资源限制
memory_limit = "1g"

[sandbox.network]
# 允许访问特定主机
enabled = true
allowed_hosts = [
    "api.example.com",
    "data.example.com",
]

# -----------------------------------------------------------------------------
# Shell 环境变量
# -----------------------------------------------------------------------------
[shell.env]
# Agent 特定的环境变量
# 使用 ${VAR} 引用 .env 中的敏感信息
API_KEY = "${EXAMPLE_API_KEY:}"
DEBUG = "false"
LOG_LEVEL = "info"

# -----------------------------------------------------------------------------
# 工具配置
# -----------------------------------------------------------------------------
[tools]
# 额外启用的工具
enabled = [
    "web_search",
    "fetch_url",
]

# 工具特定配置
[tools.config.web_search]
provider = "tavily"
max_results = 5

[tools.config.http_request]
timeout = 60

# -----------------------------------------------------------------------------
# MCP 服务器配置
# -----------------------------------------------------------------------------
[mcp.servers.custom_api]
name = "Custom API"
description = "自定义 API 服务"
url = "http://localhost:8080"
transport = "http"
enabled = false
api_key_env = "CUSTOM_API_KEY"

# -----------------------------------------------------------------------------
# Human-in-the-Loop 配置
# -----------------------------------------------------------------------------
[hitl]
# 覆盖需要确认的操作
require_confirmation = [
    "write_file",
    "http_request",
]

# 自动批准的操作
auto_approve_patterns = [
    "read_*",
    "search_*",
    "fetch_url",  # 允许自动抓取网页
]
