# ==============================================================================
# SonarCloud Configuration - AI Agent (Monorepo)
# ==============================================================================
# 用于整个项目的 SonarCloud 分析
# 
# 使用方式 (在 GitHub Actions 中自动配置):
#   sonar-scanner -Dsonar.host.url=https://sonarcloud.io \
#                 -Dsonar.organization=your-org \
#                 -Dsonar.token=your-token
# ==============================================================================

# 项目标识
sonar.projectKey=ai-agent
sonar.projectName=AI Agent Platform
sonar.projectVersion=0.1.0

# SonarCloud 配置 (使用时填写组织名)
# sonar.organization=your-github-username-or-org
sonar.host.url=https://sonarcloud.io

# 源代码配置
sonar.sources=backend/api,backend/app,backend/core,backend/db,backend/models,backend/schemas,backend/services,backend/tools,backend/utils,frontend/src
sonar.tests=backend/tests,frontend/src
sonar.test.inclusions=**/*test*.py,**/*_test.py,**/test_*.py,**/*.test.ts,**/*.test.tsx,**/*.spec.ts,**/*.spec.tsx
sonar.sourceEncoding=UTF-8

# Python 配置
sonar.python.version=3.11

# TypeScript 配置
sonar.typescript.tsconfigPath=frontend/tsconfig.json

# 排除文件/目录
sonar.exclusions=\
  **/__pycache__/**,\
  **/*.pyc,\
  **/migrations/**,\
  **/.venv/**,\
  **/node_modules/**,\
  **/dist/**,\
  **/build/**,\
  **/coverage/**,\
  **/*.config.js,\
  **/*.config.ts,\
  **/*.d.ts,\
  **/*.md,\
  **/alembic/versions/**

# 覆盖率报告
sonar.python.coverage.reportPaths=backend/coverage.xml
sonar.javascript.lcov.reportPaths=frontend/coverage/lcov.info

# 单元测试报告
sonar.python.xunit.reportPath=backend/test-results.xml

# 代码重复率阈值
sonar.cpd.minimumTokens=50
sonar.cpd.minimumLines=5

# CSS/SCSS 分析
sonar.css.file.suffixes=.css
