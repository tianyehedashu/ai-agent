# ==============================================================================
# SonarQube / SonarCloud Configuration - Frontend (TypeScript/React)
# ==============================================================================
# 本地 SonarQube 使用方式:
#   sonar-scanner -Dsonar.host.url=http://localhost:9000 -Dsonar.token=your-token
#
# SonarCloud 使用方式 (在 GitHub Actions 中自动配置):
#   sonar-scanner -Dsonar.host.url=https://sonarcloud.io \
#                 -Dsonar.organization=your-org \
#                 -Dsonar.token=your-token
# ==============================================================================

# 项目标识
sonar.projectKey=ai-agent-frontend
sonar.projectName=AI Agent Frontend
sonar.projectVersion=0.1.0

# SonarCloud 配置 (使用时取消注释并填写组织名)
# sonar.organization=your-github-username-or-org
# sonar.host.url=https://sonarcloud.io

# 源代码配置
sonar.sources=src
sonar.tests=src
sonar.test.inclusions=**/*.test.ts,**/*.test.tsx,**/*.spec.ts,**/*.spec.tsx
sonar.sourceEncoding=UTF-8

# TypeScript 配置
sonar.typescript.tsconfigPath=tsconfig.json

# 排除文件/目录
sonar.exclusions=\
  **/node_modules/**,\
  **/dist/**,\
  **/build/**,\
  **/coverage/**,\
  **/*.config.js,\
  **/*.config.ts,\
  **/*.d.ts,\
  **/test/setup.ts,\
  **/*.md

# 测试文件排除 (从主代码分析中)
sonar.test.exclusions=\
  **/*.test.ts,\
  **/*.test.tsx,\
  **/*.spec.ts,\
  **/*.spec.tsx,\
  **/test/**

# 覆盖率报告 (Vitest 生成)
# 运行: npm run test:coverage
# Vitest 默认生成 coverage/lcov.info
sonar.javascript.lcov.reportPaths=coverage/lcov.info

# ESLint 报告 (可选)
# 运行: npm run lint -- -f json -o eslint-report.json
# sonar.eslint.reportPaths=eslint-report.json

# ==============================================================================
# 质量门禁配置 (Quality Gate)
# ==============================================================================

# 代码重复率阈值
sonar.cpd.minimumTokens=50
sonar.cpd.minimumLines=5

# ==============================================================================
# CSS/SCSS 分析
# ==============================================================================
sonar.css.file.suffixes=.css

# ==============================================================================
# 分支/PR 分析配置 (用于 CI)
# ==============================================================================

# 在 CI 中通过环境变量设置:
# sonar.branch.name=${BRANCH_NAME}
# sonar.pullrequest.key=${PR_NUMBER}
# sonar.pullrequest.branch=${PR_BRANCH}
# sonar.pullrequest.base=${PR_TARGET}
